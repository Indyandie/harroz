(include "./theme.yuck")
(include "./network.yuck")
(include "./blue.yuck")
(include "./volume.yuck")
(include "./date.yuck")
(include "./battery.yuck")
(include "./traybar.yuck")
(include "./active-window.yuck")

; main
(defwindow menubar
  :exclusive false
  :monitor 0
  :stacking "overlay"
  :geometry (geometry 
    :x 1
    :y 0
    :width "100%"
    :height "4px"
    :anchor "top center"
    )
  (eventbox
    :hexpand true
    :onscroll "eww update show-menubar=true"
    :onhoverlost "eww update show-menubar=false"
    :cursor "default"
    (menubar_layout)
    )
  )

(defvar show-menubar false)

(defwidget menubar_layout []
  (revealer
    :transition "slidedown"
    :reveal show-menubar
    :duration "400ms"
    (centerbox
      :class "layout-box"
      :hexpand true
      :halign "fill" ;center ignores hexpand
      (box
        :hexpand true
        :class "chronic"
        :halign "start"
        (_date)
        )
      (box
        (_active-window)
        )
      (box 
        :hexpand true
        :halign "end"
        :class "system"
        :space-evenly false
        :spacing 16
        (_volume)
        (_blue)
        (_network)
        (_battery)
        )
      )
    )
  )

